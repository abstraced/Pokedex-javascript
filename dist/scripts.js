var pokemonRepository=function(){var e=[],o="https://pokeapi.co/api/v2/pokemon/?limit=150";return{add:function(o){"object"==typeof o?e.push(o):console.log(" not an object")},getAll:function(){return e},renderAll:function(){pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addItem(e),pokemonRepository.loadDetails(e)})}),pokemonRepository.moveModalWhenScrolling(),pokemonRepository.addGlobalEvent()},loadList:function(){return fetch(o).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){var o={name:e.name,detailsUrl:e.url};pokemonRepository.add(o)})}).catch(function(e){console.error(e)})},loadDetails:function(e){var o=e.detailsUrl;return fetch(o).then(function(e){return e.json()}).then(function(o){e.imageUrl=o.sprites.front_default,e.height=o.height,e.types=Object.values(o.types),console.log(e.types[0].type.name)}).catch(function(e){console.error(e)})},showDetails:function(e){var o=document.querySelector("#modal-container");o.innerHTML="";var t=document.createElement("div");t.classList.add("modal");var n=document.createElement("button");n.classList.add("modal-close"),n.innerText="Close",n.addEventListener("click",pokemonRepository.hideModal);var i=document.createElement("h1");i.innerText="Name:   "+e.name;var a=document.createElement("p");a.innerText="Height   "+e.height+"m";var l=document.createElement("p"),s=document.createElement("Img");s.src=e.imageUrl,s.classList.add("image"),t.appendChild(n),t.appendChild(i),t.appendChild(a),t.appendChild(l),t.appendChild(s),o.appendChild(t),o.classList.add("is-visible")},addItem:function(e){var o=document.querySelector(".pokemonList"),t=document.createElement("li"),n=document.createElement("button");n.addEventListener("click",function(){pokemonRepository.showDetails(e)}),n.addEventListener("click",function(){pokemonRepository.showDetails(e)}),n.classList.add("button"),n.innerText=e.name,t.appendChild(n),o.appendChild(t)},moveModalWhenScrolling:function(){window.onscroll=function(){window.pageYOffset-100>o?e.classList.add("sticky"):e.classList.remove("sticky")};var e=document.getElementById("modal-container"),o=e.offsetTop},hideModal:function(){document.querySelector("#modal-container").classList.remove("is-visible")},addGlobalEvent:function(){var e=document.querySelector("#modal-container");window.addEventListener("keydown",o=>{"Escape"===o.key&&e.classList.contains("is-visible")&&pokemonRepository.hideModal()}),document.querySelector("body").addEventListener("click",o=>{console.log(t);var t=o.target.type,n=o.target;e.classList.contains("is-visible")&&"submit"!==t&&n.classList.contains("container")&&pokemonRepository.hideModal(),console.log(n)})}}}();pokemonRepository.renderAll();
